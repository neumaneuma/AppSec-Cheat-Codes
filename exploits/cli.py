import sys

# Configure which endpoint and which url the exploit uses. The default is to use the
# vulnerable endpoint for the local server. However you can set this to whatever you want.
LOCAL_SERVER_URL = "http://127.0.0.1:12301"
REMOTE_SERVER_URL = "https://api.ctf.neumaneuma.com"

use_vulnerable_endpoint = True
url_prefix = LOCAL_SERVER_URL


def get_cli_arguments() -> tuple[bool, str]:
    global use_vulnerable_endpoint
    global url_prefix

    opts = [opt for opt in sys.argv[1:] if opt.startswith("-")]
    message = "Overriding default: "

    if "-p" in opts:
        use_vulnerable_endpoint = False
        print(f"{message} using patched endpoint")
    elif "-v" in opts:
        use_vulnerable_endpoint = True
        print(f"{message} using vulnerable endpoint")

    if "-r" in opts:
        url_prefix = REMOTE_SERVER_URL
        print(f"{message} using remote server")
    elif "-l" in opts:
        url_prefix = LOCAL_SERVER_URL
        print(f"{message} using local server")

    return use_vulnerable_endpoint, url_prefix
